<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">

<main id="main" >

    <article class="slide">
        <div class="sliderWrap" th:if="${slideCard == null}">
            <div class="slider s1"><a href="/content/9791187142560"><img src="/images/slides/slider01.png" alt="slider01"></a></div>
            <div class="slider s2"><a href="/content/9791187444725"><img src="/images/slides/slider02.png" alt="slider02"></a></div>
            <div class="slider s3"><a href="/content/9791192300818"><img src="/images/slides/slider03.png" alt="slider03"></a></div>
        </div>
        <div class="sliderWrap" th:unless="${slideCard == null}" th:style="'width: ' + (${slideCard.size()+1} * 100) + '%'">
            <div class="slider s1" th:each="card : ${slideCard}">
                <a th:href="@{/content/{ISBN}(ISBN=${card.ISBN13})}">
                    <img th:src="@{/images/slides/{fileName}(fileName=${card.slideFileName})}" th:alt="${card.slideFileName}">
                </a>
            </div>
        </div>
    </article>


    <section id="content">
        <div class="notice" th:if="${boards == null}">
            <h3>게시판</h3><a th:href="@{|board/paging|}"> 더보기 ></a>
            <ul>
                <li><a href="#">[이벤트] 메모 남기기 이벤트</a><span>2024-04-14</span></li>
                <li><a href="#">[공지사항] 도서를 나눠드립니다.</a><span>2024-04-14</span></li>
                <li><a href="#">일반 글쓰기</a><span>2024-04-10</span></li>
                <li><a href="#">테스크 글쓰기</a><span>2024-04-11</span></li>
                <li><a href="#">테스크 글쓰기</a><span>2024-04-13</span></li>
                <li><a href="#">테스크 글쓰기</a><span>2024-04-15</span></li>
            </ul>
        </div>
        <div class="notice" th:unless="${boards == null}"> 게시판
            <a th:href="@{|board/paging|}"> 더보기 ></a>
            <ul th:each="board : ${boards}">
                <li>
                    <a th:if="${board.category.name() eq 'EVENT'}"
                       th:href="@{/board/{id}(id=${board.id})}"
                       th:text="|[이벤트] ${#strings.length(board.title) > 15 ? board.title.substring(0, 13) + '...' : board.title}|"></a>
                    <a th:if="${board.category.name() eq 'NOTICE'}"
                       th:href="@{/board/{id}(id=${board.id})}"
                       th:text="|[공지사항] ${#strings.length(board.title) > 15 ? board.title.substring(0, 13) + '...' : board.title}|"></a>
                    <a th:unless="${board.category.name() eq 'NOTICE' || board.category.name() eq 'EVENT'}"
                       th:href="@{/board/{id}(id=${board.id})}"
                       th:text="${#strings.length(board.title) > 19 ? board.title.substring(0, 17) + '...' : board.title}"></a>
                    <span th:text="${board.createDate}"></span>
                </li>
            </ul>
        </div>
        <div class="recommend" th:if="${aladinBooks.size() != 0}"> 알라딘 베스트 셀러
            <a href="/slide">admin</a>
            <div class="rec_book">
                <ul th:each="book : ${aladinBooks}">
                    <li>
                        <a class="rec_cover" th:href="@{/content/{ISBN}(ISBN=${book.ISBN13})}"><img class="rec_cover" th:src="${book.cover}"></a>
                        <a class="rec_title" th:href="@{/content/{ISBN}(ISBN=${book.ISBN13})}" th:text="${#strings.length(book.title) > 25 ? book.title.substring(0, 23) + '...' : book.title}"></a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="recommend" th:unless="${aladinBooks.size() != 0}"> 에이북즈 도서 추천
            <a href="/slide">admin</a>
            <ul th:each="book : ${aladinBooks}">
                <li>
                    <a class="rec_cover" th:href="@{/content/{ISBN}(ISBN=${book.ISBN13})}"><img class="rec_cover" th:src="${book.cover}"></a>
                    <a class="rec_title" th:href="@{/content/{ISBN}(ISBN=${book.ISBN13})}" th:text="${#strings.length(book.title) > 25 ? book.title.substring(0, 23) + '...' : book.title}"></a>
                </li>
            </ul>
        </div>

        <div class="memo" sec:authorize="!isAuthenticated()">
            <img src="/images/memo_card.png" alt="메모카드">
            <a href="/member/loginForm" class="memo_card"> 로그인 하기 </a>

        </div>
        <div class="memo" sec:authorize="isAuthenticated()" th:if="${books == null or shelves == null }">
            <img src="/images/memo_card.png" alt="메모카드">
            <a href="/myshelf" class="memo_card">나의 서재</a>
        </div>
        <div class="memo" sec:authorize="isAuthenticated()" th:unless="${books == null and shelves == null}">
            <div class="memoWrap" th:style="'width: ' + (${shelves.size()+2} * 100) + '%'">
                <div class="inner" th:each="book, index : ${books}" th:with="shelf=${shelves[__${index.index}__]}">
                    <img th:src="${book.cover}" alt="book_cover" class="memo_cover">
                    <div class="memo_text">
                        <div class="memo_title" th:text="${#strings.length(book.title) > 35 ? book.title.substring(0, 32) + '...' : book.title}"></div>
                        <div class="memo_day" th:text="|${shelf.days+1}일째 읽는중|"> 5일째 읽는 중 </div>
                        <div class="read_bar">
                            <progress class="progress bg-stone-300 w-56 h-2" th:value="${(shelf.currentPage * 100) / book.itemPage}" max="100"></progress>
                        </div>
                        <div class="memo_page">
                            <div class="per" th:text="${(shelf.currentPage * 100) / book.itemPage + '%'}"> 10% </div>
                            <div class="page" th:text="|${shelf.currentPage}/${book.itemPage} 페이지|"> 30/300 페이지 </div>
                        </div>
                    </div>
                    <a class="memo_btn" href="#">메모하기</a>
                    <div th:replace="~{review/memo :: memo}" /><br>
                </div>
            </div>
            <div id="overlay"></div>
            <div class="arrow left" th:if="${books.size() > 1}"></div>
            <div class="arrow right" th:if="${books.size() > 1}"></div>
        </div>
    </section>

</main>

